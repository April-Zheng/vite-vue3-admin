import{d as V,r as _,j as f,k as b,l as h,m as y,o as k,c as x,a as F,b as t,w as u,n as R,p as q,q as B,s as C,t as I,v as U,e as z}from"./index-BrKaAMLa.js";import N from"./Title-RCRFIl7n.js";const T={class:"login-form-wrap"},$={class:"login-form"},j=V({__name:"index",setup(S){const a=_({name:"admin",password:"123456"}),g=_({name:[{required:!0,message:"请输入账号名"}],password:[{required:!0,message:"请输入账号名"}]}),m=f(null),d=f(!1),v=b(),p=h(),c=y(),w=n=>{n&&(n==null||n.validate().then(async o=>{var r,l;if(o){d.value=!0;try{const e=await q(a);if(d.value=!1,(e==null?void 0:e.code)===200)if(v.setToken(e==null?void 0:e.data.token),!((r=c.query)!=null&&r.redirect))p.push("/");else{const s=decodeURIComponent((l=c.query)==null?void 0:l.redirect);s!=null&&s.startsWith("http")?location.href=s:p.push(s)}}catch(e){d.value=!1,console.log("submit error",e)}}}))};return(n,o)=>{const r=B,l=C,e=I,s=U;return k(),x("div",T,[F("div",$,[t(N),t(s,{"label-position":"top",ref_key:"loginFormRef",ref:m,rules:g,model:a},{default:u(()=>[t(l,{label:"账号名",prop:"name",size:"large"},{default:u(()=>[t(r,{modelValue:a.name,"onUpdate:modelValue":o[0]||(o[0]=i=>a.name=i),placeholder:"请输入账号名"},null,8,["modelValue"])]),_:1}),t(l,{label:"密码",prop:"password",size:"large"},{default:u(()=>[t(r,{modelValue:a.password,"onUpdate:modelValue":o[1]||(o[1]=i=>a.password=i),"show-password":"",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),t(l,null,{default:u(()=>[t(e,{size:"large",type:"primary",loading:d.value,onClick:o[2]||(o[2]=i=>w(m.value))},{default:u(()=>[R("登录")]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules","model"])])])}}}),D=z(j,[["__scopeId","data-v-5884797b"]]);export{D as default};
