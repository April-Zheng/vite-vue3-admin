import{d as b,R as _,r as f,a_ as V,a$ as h,b0 as y,o as k,k as x,aa as R,B as t,Z as u,$ as F,b1 as B,a1 as $,a7 as q}from"./index-DTZ3XioU.js";import{E as C,a as I}from"./el-form-item-dGz7QlA2.js";import{E as U}from"./el-input-kOSCC3gA.js";import z from"./Title-SuXD1110.js";import"./_initCloneObject-XbzLhW5N.js";const N={class:"login-form-wrap"},T={class:"login-form"},E=b({__name:"index",setup(S){const s=_({name:"admin",password:"123456"}),g=_({name:[{required:!0,message:"请输入账号名"}],password:[{required:!0,message:"请输入账号名"}]}),m=f(null),d=f(!1),v=V(),p=h(),c=y(),w=n=>{n&&(n==null||n.validate().then(async o=>{var r,l;if(o){d.value=!0;try{const e=await B(s);if(d.value=!1,(e==null?void 0:e.code)===200)if(v.setToken(e==null?void 0:e.data.token),!((r=c.query)!=null&&r.redirect))p.push("/");else{const a=decodeURIComponent((l=c.query)==null?void 0:l.redirect);a!=null&&a.startsWith("http")?location.href=a:p.push(a)}}catch(e){d.value=!1,console.log("submit error",e)}}}))};return(n,o)=>{const r=U,l=C,e=$,a=I;return k(),x("div",N,[R("div",T,[t(z),t(a,{"label-position":"top",ref_key:"loginFormRef",ref:m,rules:g,model:s},{default:u(()=>[t(l,{label:"账号名",prop:"name",size:"large"},{default:u(()=>[t(r,{modelValue:s.name,"onUpdate:modelValue":o[0]||(o[0]=i=>s.name=i),placeholder:"请输入账号名"},null,8,["modelValue"])]),_:1}),t(l,{label:"密码",prop:"password",size:"large"},{default:u(()=>[t(r,{modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=i=>s.password=i),"show-password":"",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),t(l,null,{default:u(()=>[t(e,{size:"large",type:"primary",loading:d.value,onClick:o[2]||(o[2]=i=>w(m.value))},{default:u(()=>[F("登录")]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules","model"])])])}}}),G=q(E,[["__scopeId","data-v-5884797b"]]);export{G as default};
