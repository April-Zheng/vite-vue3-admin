import{d as V,R as _,r as f,aU as h,aV as y,aW as b,o as k,k as x,aa as R,B as a,$ as u,a0 as F,aX as B,a1 as U,Z as q}from"./index-C0RPCrUm.js";import{E as C,a as I}from"./el-form-item-T133FDzs.js";import{E as $}from"./el-input-dlJ1HjHA.js";import z from"./Title-267QDaCb.js";import"./_initCloneObject-X_0p1fWO.js";const N={class:"login-form-wrap"},T={class:"login-form"},E=V({__name:"index",setup(W){const s=_({name:"admin",password:"123456"}),g=_({name:[{required:!0,message:"请输入账号名"}],password:[{required:!0,message:"请输入账号名"}]}),m=f(null),d=f(!1),v=h(),p=y(),c=b(),w=n=>{n&&(n==null||n.validate().then(async o=>{var r,l;if(o){d.value=!0;try{const e=await B(s);if(d.value=!1,(e==null?void 0:e.code)===200)if(v.setToken(e==null?void 0:e.data.token),!((r=c.query)!=null&&r.redirect))p.push("/");else{const t=decodeURIComponent((l=c.query)==null?void 0:l.redirect);t!=null&&t.startsWith("http")?location.href=t:p.push(t)}}catch(e){d.value=!1,console.log("submit error",e)}}}))};return(n,o)=>{const r=$,l=C,e=U,t=I;return k(),x("div",N,[R("div",T,[a(z),a(t,{"label-position":"top",ref_key:"loginFormRef",ref:m,rules:g,model:s},{default:u(()=>[a(l,{label:"账号名",prop:"name",size:"large"},{default:u(()=>[a(r,{modelValue:s.name,"onUpdate:modelValue":o[0]||(o[0]=i=>s.name=i),placeholder:"请输入账号名"},null,8,["modelValue"])]),_:1}),a(l,{label:"密码",prop:"password",size:"large"},{default:u(()=>[a(r,{modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=i=>s.password=i),"show-password":"",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),a(l,null,{default:u(()=>[a(e,{size:"large",type:"primary",loading:d.value,onClick:o[2]||(o[2]=i=>w(m.value))},{default:u(()=>[F("登录")]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules","model"])])])}}}),D=q(E,[["__scopeId","data-v-5884797b"]]);export{D as default};
