import{a as T,r as u,v as O,w as P,x as R,o,g as m,X as r,S as E,Q as w,Y as v,a0 as f,a1 as B,a2 as _,j as y,a3 as q,a4 as V,H as j,a5 as $,W as H,Z as M,a6 as Q}from"./index-G26atv0Q.js";import"./index.vue_vue_type_script_setup_true_lang-AtklHC8g.js";/* empty css                        */import"./el-input-ieLVM6ho.js";import"./el-select-tF_tU_z-.js";import{_ as U}from"./index.vue_vue_type_style_index_0_scoped_ebda1f14_lang-xKYYT3s0.js";import{E as F,a as G,b as W}from"./index-kkslmq-2.js";import"./el-form-item-osxiA4np.js";import"./el-col-1yt9dc2A.js";import{g as X}from"./components-5O2NDbiI.js";import"./_initCloneObject-Tzwy7V6B.js";const Y=T({__name:"index",props:{columns:{},pageConfig:{type:[Object,Boolean],default:{background:!0,pageSizes:[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"}},searchable:{type:Boolean,default:!0}},emits:["request"],setup(C,{emit:g}){const c=C,l=g,s=u([]),a=u(!1),b=u(0),p=c.pageConfig?{pageSize:10,page:1}:{};let t=u(p);const S=O(()=>c.columns.filter(e=>!e.hideInSearch&&e.prop)),h=async()=>{a.value=!0,l("request",t.value,e=>{var d,i;e.code===200&&(s.value=((d=e.data)==null?void 0:d.list)||[],b.value=(i=e==null?void 0:e.data)==null?void 0:i.total),a.value=!1})},z=e=>{t.value={pageSize:e,page:1}},I=e=>{t.value.page=e},k=(e={})=>{t.value={...t.value,...e,page:p==null?void 0:p.page}},N=()=>{t.value={page:p==null?void 0:p.page,pageSize:t.value.pageSize}};return P(t,()=>{h()},{deep:!0}),R(()=>{h()}),(e,d)=>{const i=W,D=F,L=G,A=q;return o(),m(f,null,[e.searchable?(o(),r(U,{key:0,fields:S.value,onSubmit:k,onReset:N},null,8,["fields"])):E("",!0),w((o(),r(D,{data:s.value},{default:v(()=>[(o(!0),m(f,null,B(e.columns,n=>(o(),m(f,null,[n.slot?(o(),r(i,V(_({key:0},n)),{default:v(x=>[j(e.$slots,n.slot,{row:x.row,column:n},void 0,!0)]),_:2},1040)):n.component?(o(),r($(n.component),{key:1,config:n},null,8,["config"])):(o(),r(i,_({key:2},n,{align:"center","show-overflow-tooltip":!0}),null,16))],64))),256))]),_:3},8,["data"])),[[A,a.value]]),e.pageConfig?(o(),r(L,_({key:1,class:"mt20 flexEnd"},e.pageConfig,{"current-page":y(t).page,"page-size":y(t).pageSize,total:b.value,onSizeChange:z,onCurrentChange:I}),null,16,["current-page","page-size","total"])):E("",!0)],64)}}}),Z=H(Y,[["__scopeId","data-v-ebda1f14"]]),ie=T({__name:"index",setup(C){const g=u([{type:"selection"},{prop:"inspectionId",label:"工单ID",hideInSearch:!0},{prop:"eleContractNo",label:"产品合同号",type:"input"},{prop:"mntContractNo",label:"保养合同号",type:"input"},{prop:"customerName",label:"客户名称",type:"input"},{prop:"inspectionType",label:"作业类型",slot:"inspectionType",type:"select",fieldProps:{options:[{label:"升降梯",value:"ELEVATOR"},{label:"扶梯",value:"ESCALATOR"}]}},{prop:"userName",label:"保养巡视人员",type:"input"},{prop:"inspectionDate",label:"巡视时间",type:"datePicker"},{prop:"orderCode",label:"订单状态",type:"select",fieldProps:{options:["INITIATED","CHANGE_REQUEST","INSPECTION_AUDIT","COMPLETE"].map(l=>({label:l,value:l}))}}]),c=async(l,s)=>{const a=await X(l);s==null||s(a)};return(l,s)=>(o(),r(y(Z),{columns:g.value,onRequest:c},{inspectionType:v(({row:a})=>[M(Q((a==null?void 0:a.inspectionType)==="ELEVATOR"?"升降梯":"扶梯"),1)]),_:1},8,["columns"]))}});export{ie as default};
