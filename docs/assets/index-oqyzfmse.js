import{d as E,r as u,y as P,w as R,z as w,o,k as m,c as r,V as T,T as x,$ as v,a2 as f,a3 as B,a4 as _,u as y,a5 as V,a6 as q,K as $,a7 as j,Z as M,a0 as U,a8 as F}from"./index-C0RPCrUm.js";import"./index.vue_vue_type_script_setup_true_lang-2X87jxOA.js";/* empty css                        */import"./el-input-dlJ1HjHA.js";import"./el-select-WQ7npXME.js";import{_ as G}from"./index.vue_vue_type_style_index_0_scoped_ebda1f14_lang-7mA_UBXk.js";import{E as H,a as K,b as Q}from"./index-4kZTzZ1M.js";import"./el-form-item-T133FDzs.js";import"./el-col-Q7Vehoih.js";import{g as Z}from"./components-0QOMmpNg.js";import"./_initCloneObject-X_0p1fWO.js";const J=E({__name:"index",props:{columns:{},pageConfig:{type:[Object,Boolean],default:{background:!0,pageSizes:[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"}},searchable:{type:Boolean,default:!0}},emits:["request"],setup(C,{emit:d}){const c=C,l=d,s=u([]),a=u(!1),b=u(0),p=c.pageConfig?{pageSize:10,page:1}:{};let t=u(p);const S=P(()=>c.columns.filter(e=>!e.hideInSearch&&e.prop)),h=async()=>{a.value=!0,l("request",t.value,e=>{var g,i;e.code===200&&(s.value=((g=e.data)==null?void 0:g.list)||[],b.value=(i=e==null?void 0:e.data)==null?void 0:i.total),a.value=!1})},z=e=>{t.value={pageSize:e,page:1}},k=e=>{t.value.page=e},I=(e={})=>{t.value={...t.value,...e,page:p==null?void 0:p.page}},N=()=>{t.value={page:p==null?void 0:p.page,pageSize:t.value.pageSize}};return R(t,()=>{h()},{deep:!0}),w(()=>{h()}),(e,g)=>{const i=Q,D=H,L=K,A=V;return o(),m(f,null,[e.searchable?(o(),r(G,{key:0,fields:S.value,onSubmit:I,onReset:N},null,8,["fields"])):T("",!0),x((o(),r(D,{data:s.value},{default:v(()=>[(o(!0),m(f,null,B(e.columns,n=>(o(),m(f,null,[n.slot?(o(),r(i,q(_({key:0},n)),{default:v(O=>[$(e.$slots,n.slot,{row:O.row,column:n},void 0,!0)]),_:2},1040)):n.component?(o(),r(j(n.component),{key:1,config:n},null,8,["config"])):(o(),r(i,_({key:2},n,{align:"center","show-overflow-tooltip":!0}),null,16))],64))),256))]),_:3},8,["data"])),[[A,a.value]]),e.pageConfig?(o(),r(L,_({key:1,class:"mt20 flexEnd"},e.pageConfig,{"current-page":y(t).page,"page-size":y(t).pageSize,total:b.value,onSizeChange:z,onCurrentChange:k}),null,16,["current-page","page-size","total"])):T("",!0)],64)}}}),W=M(J,[["__scopeId","data-v-ebda1f14"]]),ie=E({__name:"index",setup(C){const d=u([{type:"selection"},{prop:"inspectionId",label:"工单ID",hideInSearch:!0},{prop:"eleContractNo",label:"产品合同号",type:"input"},{prop:"mntContractNo",label:"保养合同号",type:"input"},{prop:"customerName",label:"客户名称",type:"input"},{prop:"inspectionType",label:"作业类型",slot:"inspectionType",type:"select",fieldProps:{options:[{label:"升降梯",value:"ELEVATOR"},{label:"扶梯",value:"ESCALATOR"}]}},{prop:"userName",label:"保养巡视人员",type:"input"},{prop:"inspectionDate",label:"巡视时间",type:"datePicker"},{prop:"orderCode",label:"订单状态",type:"select",fieldProps:{options:["INITIATED","CHANGE_REQUEST","INSPECTION_AUDIT","COMPLETE"].map(l=>({label:l,value:l}))}}]),c=async(l,s)=>{const a=await Z(l);s==null||s(a)};return(l,s)=>(o(),r(y(W),{columns:d.value,onRequest:c},{inspectionType:v(({row:a})=>[U(F((a==null?void 0:a.inspectionType)==="ELEVATOR"?"升降梯":"扶梯"),1)]),_:1},8,["columns"]))}});export{ie as default};
