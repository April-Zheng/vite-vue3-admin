import{d as F,r as p,F as m,o as c,g as v,w as S,b,a5 as _,e as C,t as h,f as V,aa as x,$ as A,E as T}from"./index-G0iPKgYS.js";import{a as j,_ as q}from"./index.vue_vue_type_script_setup_true_lang-Kwc6IYOy.js";import"./el-table-column-ZRdJUMFZ.js";import"./el-input-a1OXmoh8.js";const L=F({__name:"index",props:{defaultColsNumber:{},defalutCollapsed:{type:Boolean,default:!0},fields:{},model:{},config:{},submitter:{type:[Object,Boolean]},colSize:{default:{span:8}},submitterColSize:{},submitterStyle:{}},emits:["onCollapseChange","submit","reset"],setup(g,{emit:z}){const s=g,y=z,f=p(),i=p(s.defalutCollapsed);let r=p(0),a=p(0);const d=m(()=>{var u;if(s.defaultColsNumber!==void 0)return s.defaultColsNumber;const e=((u=s.submitterColSize)==null?void 0:u.span)||s.colSize.span,t=24/s.colSize.span;return Math.max(1,e>s.colSize.span?t:t-1)}),$=m(()=>!(r.value<24||s.fields.length<=d.value)),k=()=>{var e;return r.value=0,a.value=0,(e=s.fields)==null?void 0:e.map((t,u)=>{var n;const l=s.colSize.span;r.value+=l;const o=((n=t==null?void 0:t.fieldProps)==null?void 0:n.hidden)||i.value&&u>=d.value&&r.value>=24;return 24-a.value%24<l&&(r.value+=24-a.value%24,a.value+=24-a.value%24),o||(a.value+=l),{...t,hidden:o}})},w=m({get:()=>k(),set:e=>e}),N=()=>{var l;const e=((l=s.submitterColSize)==null?void 0:l.span)||s.colSize.span;return 24-a.value%24-e},R=m({get:()=>N(),set:e=>e}),B=()=>{i.value=!i.value,y("onCollapseChange",i.value)};return(e,t)=>{const u=T;return c(),v(b(q),{ref_key:"queryFilterRef",ref:f,config:e.config,fields:w.value,"col-size":e.colSize,"submitter-col-size":{offset:R.value,...e.submitterColSize||e.colSize},"submitter-style":{textAlign:"end",display:"flex",justifyContent:"end"},onSubmit:t[2]||(t[2]=l=>{var o;return e.$emit("submit",(o=f.value)==null?void 0:o.formValues)}),onReset:t[3]||(t[3]=l=>e.$emit("reset"))},{submitter:S(()=>[C(b(j),_({okText:"查询",cancelText:"重置",...e.submitter},{onSubmit:t[0]||(t[0]=l=>{var o,n;return(n=(o=f.value)==null?void 0:o.onSubmit)==null?void 0:n.call(o)}),onReset:t[1]||(t[1]=l=>{var o,n;return(n=(o=f.value)==null?void 0:o.onReset)==null?void 0:n.call(o)})}),null,16),$.value?(c(),v(u,{key:0,type:"primary",link:"",onClick:B},{default:S(()=>[V(h(i.value?"展开":"收起")+" ",1),C(x,{icon:i.value?"ArrowDown":"ArrowUp"},null,8,["icon"])]),_:1})):A("",!0)]),_:1},8,["config","fields","col-size","submitter-col-size"])}}});export{L as _};
